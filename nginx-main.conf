# Define the path where Nginx will write its Master Process ID (PID) file.
# This helps system management tools (like 'init' or 'supervisord') track the main process.
pid /var/run/nginx/nginx.pid;

# Set the user and group Nginx worker processes will run as for security.
# This aligns with the 'USER nginx' instruction in the Dockerfile (Principle of Least Privilege).
user  nginx;

# Determine how many worker processes Nginx should start.
# 'auto' is a common setting that typically spawns one worker per CPU core for optimal performance.
worker_processes  auto;

events {
    # Set the maximum number of simultaneous connections that each worker process can handle.
    # Higher values allow the server to manage more concurrent traffic.
    worker_connections  1024;
}

http {
    # Include Nginx's default file type mappings (e.g., '.html' is 'text/html').
    include       mime.types;

    # Set the default MIME type for files when Nginx can't determine the type from the file extension.
    default_type  application/octet-stream;

    # Enable optimized high-speed file transfers.
    # This instructs the kernel to copy data directly from disk to the network socket, bypassing the user-space buffer.
    sendfile        on;

    # Set the timeout for client keep-alive connections.
    # This keeps the connection open for faster sequential requests from the same client, reducing overhead.
    keepalive_timeout  65;

    # Include all files ending in '.conf' from the 'conf.d' directory.
    # This is where your server blocks (like the one you copied as `nginx.conf` in the Dockerfile) are loaded.
    include /etc/nginx/conf.d/*.conf;
}
