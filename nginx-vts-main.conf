# Define the path where Nginx will write its Master Process ID (PID) file.
pid /var/run/nginx/nginx.pid;

# Set the user and group Nginx worker processes will run as for security.
user  nginx;

# Determine how many worker processes Nginx should start.
worker_processes  auto;

# Explicitly define log path (Overrides hardcoded path)
error_log /var/log/nginx/error.log warn;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    # --- COMPLETE TEMP PATH OVERRIDES (Essential for custom binaries) ---
    client_body_temp_path /var/cache/nginx/client_temp;
    proxy_temp_path /var/cache/nginx/proxy_temp;
    fastcgi_temp_path /var/cache/nginx/fastcgi_temp;
    uwsgi_temp_path /var/cache/nginx/uwsgi_temp;
    scgi_temp_path /var/cache/nginx/scgi_temp;
    # --- END PATH OVERRIDES ---

    # VTS ZONE (Must be placed in the HTTP context for monitoring to work)
    vhost_traffic_status_zone;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    keepalive_timeout  65;

    # Include all files ending in '.conf' from the 'conf.d' directory.
    include /etc/nginx/conf.d/*.conf;
}
